;/*FB_PKG_DELIM*/

__d("WAWebBizLinkedCatalogErrorPopup.react",["fbt","WAWebConfirmPopup.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a,b,c){var e;b?(b=h._("__JHASH__SyIuRDkzQi9__JHASH__"),a?e=h._("__JHASH__LgTMlGmF6hT__JHASH__"):e=h._("__JHASH__u0jWEHk87lQ__JHASH__")):a?(e=h._("__JHASH__6v6w1w8EdcQ__JHASH__"),b=h._("__JHASH__oesa_H3vfdT__JHASH__")):(e=h._("__JHASH__7w_Yl01qsHz__JHASH__"),b=h._("__JHASH__UaJwfewPWJu__JHASH__"));c&&d("WAWebModalManager").ModalManager.once("close_modal",c);d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:e,onOK:function(){d("WAWebModalManager").ModalManager.close()},children:b}))}g.showConnectedCatalogDisabledPopup=a}),226);
__d("WAWebOrderDetailTextComposer",["WAWebConstantsDeprecated","WAWebRichTextField.react","WAWebRound.react","WAWebSendIcon","WAWebUISpacing","WAWebVelocityTransitionGroup","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={textFieldContainer:{display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",zIndex:"x11uqc5h",position:"x1n2onr6",$$css:!0},btnSend:{color:"xfect85",opacity:"xg01cxk",position:"x10l6tqk",right:"xk6ci0l",bottom:"x1oddz9l",textAlign:"x2b8uid",$$css:!0}};function a(a){var b=a.buttonTitle;a.chat;var e=a.disabled,f=a.onChange,g=a.onSubmit,h=a.placeholder,l=a.testid;l=a.textFieldTestId;l=a.value;return j.jsxs(j.Fragment,{children:[j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"media-caption",xstyle:[k.textFieldContainer,d("WAWebUISpacing").uiMargin.bottom40],children:j.jsx("div",{children:j.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:c("WAWebConstantsDeprecated").MAX_CART_MESSAGE_LENGTH,placeholder:h,value:l,testid:void 0,multiline:!0,showRemaining:!0,spellCheck:!0,emojiBtnPosition:"side",textFormatEnabled:!0,onEnter:function(){e!==!0&&g()},onChange:function(a){return f(a.text)}})})}),j.jsx(c("WAWebVelocityTransitionGroup"),{appear:!0,transitionName:"btn",children:j.jsx("button",{disabled:e,"data-testid":void 0,className:(i||(i=c("stylex")))([k.btnSend,d("WAWebUISpacing").uiMargin.all0,d("WAWebUISpacing").uiPadding.all0]),tabIndex:"-1",onClick:function(){return g()},title:b,children:j.jsx(d("WAWebRound.react").Round,{disabled:e,children:j.jsx(d("WAWebSendIcon").SendIcon,{width:18,directional:!0})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderProductListItem.react",["fbt","WAWebCellFrame.react","WAWebCurrencyUtils","WAWebEmojiText.react","WAWebOrderItemGetters","WAWebProductCatalogProductThumb.react","WAWebText_DONOTUSE.react","WAWebUISpacing","isNonZeroNumber","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react");function a(a){var b=a.product;a=a.onClick;var e=k.jsx(d("WAWebEmojiText.react").EmojiText,{text:b.name,ellipsify:!0,titlify:!0}),f=k.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{mediaData:d("WAWebOrderItemGetters").getMediaData(b),theme:"list"}),g=h._("__JHASH__8FjFxx9N23p__JHASH__",[h._param("item-quantity",b.quantity)]),i=null;b.quantity&&(i=k.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:g}));g=null;d("isNonZeroNumber").isNonZeroNumber(b.price)&&(g=k.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:d("WAWebCurrencyUtils").formatAmount1000(b.currency,b.price)}));var l=null;g!=null&&(l=k.jsx("span",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:"\u2022"}));g=k.jsxs("div",{children:[g,l,i]});return k.jsx(c("WAWebCellFrame.react"),{image:f,customImage:!0,primary:e,secondary:g,theme:"order-product",onClick:a},b.id.toString())}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebOrderProductList.react",["WAWebDrawerContext","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebOrderLogEvents","WAWebOrderProductListItem.react","WAWebProductCatalogCatalogConstants","WAWebProductCatalogContext","WAWebUtilsLogQplEvents","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.order,e=a.onProductDetail,f=a.sellerJid,g=function(a){var c=b.orderItemCollection.toArray();d("WAWebOrderLogEvents").logOrderListImpression({catalogContext:a,orderId:b.id,productCount:c.length,catalogOwnerJid:f});return c.map(function(a){return{itemKey:a.id.toString(),product:a}})},h=function(b,c){b={productId:b.product.id,businessOwnerJid:f};d("WAWebUtilsLogQplEvents").qplStartProductView("Order");d("WAWebOrderLogEvents").logOrderListItemClick({catalogContext:c,orderId:a.order.id,catalogOwnerJid:f});e(b)};return i.jsx(d("WAWebDrawerContext").DrawerContext.Consumer,{children:function(b){var e=d("WAWebProductCatalogContext").getProductCatalogContext(b);return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(j,{testid:void 0,flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:g(e),renderItem:function(a){return i.jsx(c("WAWebOrderProductListItem.react"),{product:a.product,onClick:function(){return h(a,e)}})},defaultItemHeight:d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartOrderDetailDrawer.react",["fbt","WAFilteredCatch","WALogger","WANullthrows","WAQplTypes","WAWebBackendErrors","WAWebBizEntryPoint","WAWebBizGatingUtils","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebClock","WAWebCmd","WAWebConfirmPopup.react","WAWebCurrencyUtils","WAWebDBUpdateMessageTable","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerButton.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFbtCommon","WAWebFlatListController","WAWebModalManager","WAWebMsgCollection","WAWebMsgModel","WAWebOrderCollection","WAWebOrderDetailTextComposer","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderGetters","WAWebOrderProductList.react","WAWebProductCatalogFetchStateTopBar.react","WAWebProtobufsE2E.pb","WAWebSendTextMsgChatAction","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebUtilsLogQplEvents","WAWebWDSText.react","WAWebWamEnumOrderDetailsCreationAction","WAWebWidFactory","react","stylex","useLazyRef"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Catalog Order Display failed"]);l=function(){return a};return a}b=k||d("react");var m=i||(i=c("react")),n=b.useEffect,o=b.useState,p={defaultBg:{backgroundColor:"x150wa6m",$$css:!0}};function q(a){var b=a.chat,e=a.onChange,f=a.onSubmit;a=a.value;return m.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert0,d("WAWebUISpacing").uiPadding.horiz18),children:m.jsx(c("WAWebOrderDetailTextComposer"),{chat:b,onChange:e,onSubmit:f,value:a,placeholder:h._("__JHASH__eS-WrAm3LJQ__JHASH__")})})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.onCreateOrderClick,e=a.onDeclineOrderClick;a.order;a=a.sellerJid;a=d("WAWebWidFactory").createUserWid(a).equals(d("WAWebUserPrefsMeUser").getMaybeMeUser());return!a?null:m.jsxs(m.Fragment,{children:[m.jsx(c("WAWebDrawerSection.react"),{children:m.jsx(d("WAWebDrawerButton.react").DrawerButtonSimple,{testid:void 0,color:"dark",onClick:b,children:h._("__JHASH__ZLzjXjxkYp-__JHASH__")})}),m.jsx(c("WAWebDrawerSection.react"),{children:m.jsx(d("WAWebDrawerButton.react").DrawerButtonSimple,{testid:void 0,color:"dark",onClick:e,children:h._("__JHASH__quFz4fwBsa8__JHASH__")})})]})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var b=a.cancellationMessage,e=a.chat,f=a.fetchState,g=a.flatListController,i=a.isLoading,k=a.onOrderCancel,l=a.onOrderCreate,n=a.onProductDetail,o=a.order,s=a.ownerHasReviewed,t=a.sellerJid,u=a.sendCancelMessage;a=a.setCancellationMessage;if(i||o==null)return m.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:f});i="";o.products.length>0?i=h._("__JHASH__RkoUYcwRLqG__JHASH__",[h._plural(d("WAWebOrderGetters").getTotalItemCount(o)||0,"count")]):i=h._("__JHASH__i0hP8LnX2gq__JHASH__");i=m.jsx(d("WAWebWDSText.react").WDSTextTitle,{children:i});var v=null,w=o.products.reduce(function(a,b){return b.price==null?a:(a||0)+b.price*b.quantity},null),x=o.products.reduce(function(a,b){return b.currency==null?a:b.currency},null);w!=null&&x!=null?v=h._("__JHASH__zF06U2K9U_P__JHASH__",[h._param("subtotal",d("WAWebCurrencyUtils").formatAmount1000(x,w))]):v=h._("__JHASH__ZazVSvtj7rB__JHASH__");x=m.jsx(d("WAWebWDSText.react").WDSTextSmall,{as:"div",children:v});w=null;if(o.createdAt!=null){v=d("WAWebClock").Clock.timeStr(o.createdAt);w=m.jsx(d("WAWebWDSText.react").WDSTextSmall,{children:""+v})}return m.jsxs(m.Fragment,{children:[m.jsxs(c("WAWebDrawerSection.react"),{children:[m.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:f}),m.jsxs("div",{className:(j||(j=c("stylex")))(p.defaultBg,d("WAWebUISpacing").uiPadding.all18),children:[i,x]}),m.jsx(c("WAWebOrderProductList.react"),{flatListController:g,onProductDetail:n,order:o,sellerJid:t}),m.jsx("div",{className:j(p.defaultBg,d("WAWebUISpacing").uiPadding.all18),children:w}),s?m.jsx(q,{chat:e,value:b,onSubmit:u,onChange:a}):null]}),d("WAWebBizGatingUtils").orderDetailsFromCartEnabled()&&!s?m.jsx(r,{sellerJid:t,order:o,onCreateOrderClick:function(){return l(c("WANullthrows")(o))},onDeclineOrderClick:k}):null]})}s.displayName=s.name+" [from "+f.id+"]";e=m.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.userIsCartOwner,f=a.orderId,g=a.token,i=a.sellerJid,j=a.onProductDetail,k=a.onOrderCreate,p=a.ownerHasReviewed,q=a.chat,r=a.orderMessage,t=a.onOrderCancel;a=a.isPushed;var u=a===void 0?!0:a;a=o(!0);var v=a[0],w=a[1];a=o("PENDING");var x=a[0],y=a[1];a=o(null);var z=a[0],A=a[1];a=o("");var B=a[0];a=a[1];var C=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()}),D=function(){d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__usdBBFCwTOn__JHASH__")}))};n(function(){d("WAWebOrderCollection").OrderCollection.findOrder(f,i,g).then(function(a){w(!1),y("SUCCESS"),A(a),u&&(d("WAWebUtilsLogQplEvents").qplAnnotateOrderView((a==null?void 0:a.products.length)||0),d("WAWebUtilsLogQplEvents").qplEndOrderView(d("WAQplTypes").QuickLogActionType.SUCCESS))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){D(),w(!1),y("ERROR"),d("WAWebUtilsLogQplEvents").qplDropOrderView()}))["catch"](function(a){w(!1),y("ERROR"),d("WALogger").ERROR(l()).verbose().devConsole(a).sendLogs("OrderDetails: failed to display"),u&&d("WAWebUtilsLogQplEvents").qplEndOrderView(d("WAQplTypes").QuickLogActionType.FAIL)})},[]);var E=function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight()},F=function(){E();if(r!=null){var a=d("WAWebUserPrefsMeUser").getMaybeMeUser();a=a?d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(a):null;a=d("WAWebBusinessProfileUtils").hasCatalog(a);new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_DECLINE_CART,actionCategory:String(c("WAWebOrderDetailsActionCategory").RECEIVED_CART),orderDetailEntryPoint:String(c("WAWebBizEntryPoint").FROM_CART),hasNote:Boolean(B),hasCatalog:a}).commit();a=h._("__JHASH__1F-JtckVywX__JHASH__").toString()+"\n"+B;d("WAWebSendTextMsgChatAction").sendTextMsgToChat(q,a,{quotedMsg:new(d("WAWebMsgModel").Msg)(r)});if(!d("WAWebBizGatingUtils").isSellerOrderRevampEnabled())return;if(r!=null){a={status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.DECLINED};void d("WAWebDBUpdateMessageTable").updateMessageTable(r.id,a);var b=d("WAWebMsgCollection").MsgCollection.get(r.id);b&&b.set(a)}}d("WAWebCmd").Cmd.openChatFromUnread(q)},G=d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._("__JHASH__Y-D6JGvjzwX__JHASH__"):h._("__JHASH__BCcZcagIY8y__JHASH__"),H=d("WAWebBizGatingUtils").isSellerOrderRevampEnabled()?h._("__JHASH___i5qDWnNzym__JHASH__"):h._("__JHASH__yHYldlM0F3c__JHASH__");return m.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",onDrop:E,children:[m.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:e?G:H,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:E}),m.jsx(c("WAWebDrawerBody.react"),{children:m.jsx(s,{cancellationMessage:B,chat:q,fetchState:x,flatListController:C.current,isLoading:v,onOrderCancel:t,onOrderCreate:k,onProductDetail:j,ownerHasReviewed:p,order:z,sellerJid:i,sendCancelMessage:F,setCancellationMessage:a})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);
__d("WAWebLocalShippingIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="local-shipping";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=8;m=12;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 12 8",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 2H9.75C9.905 2 10.055 2.075 10.15 2.2L11.3 3.735C11.43 3.91 11.5 4.12 11.5 4.335V6C11.5 6.275 11.275 6.5 11 6.5H10.5C10.5 7.33 9.83 8 9 8C8.17 8 7.5 7.33 7.5 6.5H4.5C4.5 7.33 3.83 8 3 8C2.17 8 1.5 7.33 1.5 6.5C0.95 6.5 0.5 6.05 0.5 5.5V1C0.5 0.45 0.95 0 1.5 0H7.5C8.05 0 8.5 0.45 8.5 1V2ZM2.5 6.5C2.5 6.775 2.725 7 3 7C3.275 7 3.5 6.775 3.5 6.5C3.5 6.225 3.275 6 3 6C2.725 6 2.5 6.225 2.5 6.5ZM9.75 2.75L10.73 4H8.5V2.75H9.75ZM8.5 6.5C8.5 6.775 8.725 7 9 7C9.275 7 9.5 6.775 9.5 6.5C9.5 6.225 9.275 6 9 6C8.725 6 8.5 6.225 8.5 6.5Z",fill:"#667781"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LocalShippingIcon=a}),98);
__d("WAWebOrderDetailStatusPill.react",["fbt","WAWebActionCheckCircleIcon","WAWebAlertErrorIcon","WAWebLocalShippingIcon","WAWebOrderStatus","WAWebStatusClockIcon","WAWebUISpacing","WAWebWDSText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={container:{backgroundColor:"xairv4b",display:"x3nfvp2",alignItems:"x6s0dn4",fontSize:"x1pg5gke",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",$$css:!0},iconCipherText:{marginTop:"xdhfreh",$$css:!0},currencyIcon:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",backgroundColor:"xlo7ypk",fontSize:"x1xloe0n",color:"xq8ne21",$$css:!0}};function m(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:return h._("__JHASH__UZM-KRGodOD__JHASH__");case d("WAWebOrderStatus").OrderStatus.Processing:return h._("__JHASH__jE40eWWgJ-x__JHASH__");case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:return h._("__JHASH__z9D-NptOFH8__JHASH__");case d("WAWebOrderStatus").OrderStatus.Shipped:return h._("__JHASH__BqEnJ40U0-4__JHASH__");case d("WAWebOrderStatus").OrderStatus.Canceled:return h._("__JHASH__CC2HElcw8Fl__JHASH__");case d("WAWebOrderStatus").OrderStatus.Complete:return h._("__JHASH__XisoM1MapeK__JHASH__");case d("WAWebOrderStatus").OrderStatus.PreparingToShip:return h._("__JHASH__L4HR3JudIk5__JHASH__");case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return h._("__JHASH__WKJdwDStCJN__JHASH__");case d("WAWebOrderStatus").OrderStatus.Delivered:return h._("__JHASH__yU5lbcnSwid__JHASH__")}}function n(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.Shipped:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return;case d("WAWebOrderStatus").OrderStatus.Canceled:return"critical";case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return"success"}}function o(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:return k.jsx(d("WAWebStatusClockIcon").StatusClockIcon,{width:12,displayInline:!0,xstyle:[d("WAWebUISpacing").uiMargin.end4,l.iconCipherText]});case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return k.jsx(p,{});case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.Shipped:return k.jsx(d("WAWebLocalShippingIcon").LocalShippingIcon,{width:12,displayInline:!0,xstyle:d("WAWebUISpacing").uiMargin.end4});case d("WAWebOrderStatus").OrderStatus.Canceled:return k.jsx(d("WAWebAlertErrorIcon").AlertErrorIcon,{width:12,displayInline:!0,xstyle:d("WAWebUISpacing").uiMargin.end4});case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return k.jsx(d("WAWebActionCheckCircleIcon").ActionCheckCircleIcon,{width:12,displayInline:!0,xstyle:d("WAWebUISpacing").uiMargin.end4})}}function a(a){a=a.orderStatus;a=a===void 0?d("WAWebOrderStatus").getDefaultOrderStatus():a;return k.jsxs(d("WAWebWDSText.react").WDSTextSmall,{color:n(a),xstyle:[l.container,d("WAWebUISpacing").uiPadding.top8,d("WAWebUISpacing").uiPadding.bottom7,d("WAWebUISpacing").uiPadding.start8,d("WAWebUISpacing").uiPadding.end8],children:[o(a),m(a)]})}a.displayName=a.name+" [from "+f.id+"]";function p(){return k.jsx("span",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.all2,d("WAWebUISpacing").uiMargin.end3,l.currencyIcon),children:"R$"})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebHooksUseCatalog",["WAWebCatalogCollection","asyncToGeneratorRuntime","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h;e=h||d("react");var i=e.useEffect,j=e.useState;function a(a){var e=j(function(){return d("WAWebCatalogCollection").CatalogCollection.get(a)}),f=e[0],g=e[1],h=c("useWAWebUnmountSignal")();i(function(){var c=d("WAWebCatalogCollection").CatalogCollection.get(a);c!==f&&(c!=null?g(c):b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebCatalogCollection").CatalogCollection.find(a));if(h.aborted)return;g(b)})())},[a,f,h]);return f}g["default"]=a}),98);
__d("WAWebUseOrderDetailItems",["Promise","WAWebCatalogCollection","WAWebHooksUseCatalog","WAWebOrderDetailMath","WAWebOrderItemModel","asyncToGeneratorRuntime","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=e.useState;function a(a,e){var f=c("WAWebHooksUseCatalog")(e);e=l([]);var g=e[0],i=e[1];e=l(!0);var m=e[0],n=e[1],o=c("useWAWebUnmountSignal")(),p=j(function(){return f==null?new Map():f.productCollection.getProductModels().reduce(function(a,b){return a.set(b.id.toString(),(a=b.getPreviewImage())==null?void 0:a.mediaUrl)},new Map())},[f]),q=j(function(c){if(f==null)return(h||(h=b("Promise"))).resolve([]);var e=a.items.reduce(function(a,b){if(b.isCustomItem||c.get(b.id)!=null)return a;b=d("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:f.id,productId:b.id});return a.concat(b)},[]);return(h||(h=b("Promise"))).all(e)},[f,a.items]),r=j(function(b,e){var f;return new(c("WAWebOrderItemModel"))(babelHelpers["extends"]({},b,{price:((f=b.amount)!=null?f:0)*d("WAWebOrderDetailMath").DEFAULT_OFFSET,currency:a.currency,thumbnailUrl:e.get(b.id)}))},[a.currency]),s=j(function(b){return a.items.map(function(a){return r(a,b)})},[a.items,r]);k(function(){b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=p();n(!0);yield q(a);if(o.aborted)return;n(!1);a=p();i(s(a))})()},[f,o,q,p,s]);return{orderItems:g,isLoading:m}}g["default"]=a}),98);
__d("WAWebOrderDetailDrawer.react",["fbt","WAWebBizGatingUtils","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebButton.react","WAWebCurrencyUtils","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerButton.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFlex.react","WAWebFlexItem.react","WAWebOrderDetailItems","WAWebOrderDetailMath","WAWebOrderDetailSectionContainer.react","WAWebOrderDetailSellerProfile.react","WAWebOrderDetailStatusPill.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebOrderSummaryDrawer","WAWebOrdersExpansionCountries","WAWebSpinner.react","WAWebStatusClockIcon","WAWebText_DONOTUSE.react","WAWebUISpacing","WAWebUseOrderDetailItems","WAWebUserPrefsMeUser","WAWebWDSText.react","WAWebWamEnumOrderDetailsCreationAction","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useMemo,o={buttonWrapper:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",$$css:!0}};e=l.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=d("WAWebUserPrefsMeUser").getMeUser();var f=e.chat,g=e.orderInfo,i=e.sellerWid,k=g.referenceId,q=g.discount,r=g.tax,s=g.shipping,t=g.subtotal,u=g.totalAmount,v=c("WAWebUseOrderDetailItems")(g,i),w=v.orderItems;v=v.isLoading;var x=n(function(){return d("WAWebOrderStatus").findOrderStatus(f,k)},[f,k]);m(function(){new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.VIEW_ORDER_DETAILS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasCatalog:d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(d("WAWebUserPrefsMeUser").getMaybeMeUser()))}).commit()},[e.entryPoint]);if(t==null)return null;var y=function(){},z=function(){d("WAWebBizSendOrderAction").sendOrderPaymentMethodUpdate({chat:f,sellerJid:i.toJid(),orderInfo:g,orderStatus:x,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,orderNote:null,paymentStatus:null,paymentMethod:d("WAWebOrderPaymentStatus").OrderPaymentMethod.Confirm})["finally"](function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),y()})};return l.jsxs(c("WAWebDrawer.react"),{onDrop:e.onBack,ref:b,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__Ssr7_bmMotN__JHASH__"):h._("__JHASH__AorvvqmREO0__JHASH__"),onBack:e.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),l.jsx(c("WAWebDrawerBody.react"),{theme:v?"center-content":void 0,children:v?l.jsx(p,{}):l.jsxs(l.Fragment,{children:[l.jsx(c("WAWebDrawerSection.react"),{xstyle:[d("WAWebUISpacing").uiPadding.top20,d("WAWebUISpacing").uiPadding.bottom15],children:l.jsxs(c("WAWebOrderDetailSectionContainer.react"),{children:[l.jsx(c("WAWebOrderDetailSellerProfile.react"),{testid:void 0,orderId:g.referenceId,sellerWid:i,orderStatus:l.jsx(c("WAWebOrderDetailStatusPill.react"),{orderStatus:x})}),l.jsx(c("WAWebOrderDetailItems"),{details:!0,currency:g.currency,items:w}),l.jsx(d("WAWebOrderSummaryDrawer").OrderValues,{tax:r!=null?r*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,discount:q!=null?q*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,shipping:s!=null?s*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,subtotal:t*d("WAWebOrderDetailMath").DEFAULT_OFFSET,currency:g.currency,canDisplayAdditionalCharges:!0}),l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",xstyle:d("WAWebUISpacing").uiPadding.horiz16,testid:void 0,children:[l.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",children:h._("__JHASH__gRCYHPsriUH__JHASH__")}),l.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",children:d("WAWebCurrencyUtils").formatAmount(g.currency,u)})]})]})}),a.user===i.user&&((v=(b=d("WAWebOrdersExpansionCountries").getOrdersExpansionAllowedCountries())==null?void 0:b.length)!=null?v:0)>0&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsxs(d("WAWebDrawerButton.react").DrawerButtonSimple,{icon:l.jsx(d("WAWebStatusClockIcon").StatusClockIcon,{width:20}),testid:void 0,color:"dark",disabled:!0,onClick:function(){},children:[l.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{size:"16",children:h._("__JHASH__-eY5_MXS2G8__JHASH__")}),l.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{size:"12",children:h._("__JHASH__Gzde0yr2UTx__JHASH__")})]})}),[d("WAWebOrderStatus").OrderStatus.Canceled,d("WAWebOrderStatus").OrderStatus.Complete].every(function(a){return x!==a})&&a.user===i.user&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx("div",{className:(j||(j=c("stylex")))(o.buttonWrapper,d("WAWebUISpacing").uiMargin.vert16),children:l.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:function(){e.onOrderStatusUpdateClick==null?void 0:e.onOrderStatusUpdateClick()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH___OAFLFy4cBY__JHASH__"):h._("__JHASH__IGnCv51HBsf__JHASH__")})})}),a.user!==i.user&&x===d("WAWebOrderStatus").OrderStatus.Pending&&((r=(w=d("WAWebOrdersExpansionCountries").getConsumerOrdersExpansionAllowedCountries())==null?void 0:w.length)!=null?r:0)>0&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx("div",{className:(j||(j=c("stylex")))(o.buttonWrapper,d("WAWebUISpacing").uiMargin.vert16),children:l.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:z,children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__KnszcWfmbB3__JHASH__"):h._("__JHASH__QjmdMEvo-j-__JHASH__")})})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;function p(){return l.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",testid:void 0,children:l.jsx(c("WAWebFlexItem.react"),{children:l.jsx(d("WAWebSpinner.react").Spinner,{})})})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=b}),226);
__d("WAWebOrderDetailProductListItem",["fbt","WAWebCellFrame.react","WAWebCurrencyUtils","WAWebEmojiText.react","WAWebOrderIcons","WAWebText_DONOTUSE.react","isNonZeroNumber","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b;a=a.product;var e=j.jsx(d("WAWebEmojiText.react").EmojiText,{text:a.name,ellipsify:!0,titlify:!0});b=j.jsx(d("WAWebOrderIcons").OrderItemIcon,{useCustomIcon:Boolean(a.mediaData)===!1,mediaData:(b=a.mediaData)!=null?b:null});var f=null;if(a.quantity){var g=h._("__JHASH__jU6_AFJakKx__JHASH__",[h._param("quantity",a.quantity.toString())]);f=j.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{children:g})}g=null;d("isNonZeroNumber").isNonZeroNumber(a.price)?g=d("WAWebCurrencyUtils").formatAmount1000(a.currency,a.price):g=h._("__JHASH__JYK4SYmCAap__JHASH__");a=j.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{children:g});return j.jsx(c("WAWebCellFrame.react"),{image:b,customImage:!0,primary:e,secondary:f,detail:a,theme:"media"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebOrderDetailProductList",["WAWebFlatList.react","WAWebFlatListContainer.react","WAWebOrderDetailProductListItem","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=60,k=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.productItems;b=b.map(function(a){return{itemKey:a.id.toString(),product:a}});return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(k,{testid:void 0,flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:b,renderItem:function(a){a=a.product;return i.jsx(c("WAWebOrderDetailProductListItem"),{product:a})},defaultItemHeight:j})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailProductListDrawer.react",["fbt","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebFlatListController","WAWebOrderDetailProductList","WAWebUISpacing","react","useLazyRef"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.productItems,f=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()});return j.jsxs(c("WAWebDrawer.react"),{onDrop:a.onBack,ref:b,children:[j.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__m-M12jx01-O__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),j.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[f.current],children:j.jsx(c("WAWebDrawerSection.react"),{xstyle:[d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.end3,d("WAWebUISpacing").uiPadding.start16],theme:"refresh-padding-title",children:j.jsx(c("WAWebOrderDetailProductList"),{flatListController:f.current,productItems:e})})})]})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),226);
__d("WAWebProductCatalogProductDetailsWithDeepLink.react",["fbt","WAFilteredCatch","WANullthrows","WAWebBackendErrors","WAWebCatalogCollection","WAWebConfirmPopup.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebFbtCommon","WAWebModalManager","WAWebProductCatalogFetchState","WAWebProductCatalogFetchStateTopBar.react","WAWebProductCatalogGetLatestProduct","WAWebProductCatalogProductDetailsDrawer.react","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useState;e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.isPushed;e=e===void 0?!0:e;var f=a.productInfo,g=f.productId,i=f.businessOwnerJid,j=a.onBack;f=m(function(){return c("WAWebProductCatalogGetLatestProduct")({productId:g,businessOwnerJid:i})});var n=f[0],o=f[1];f=m(function(){return n?"NONE":"PENDING"});var p=f[0],q=f[1],r=function(){j(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__M459z--6h5t__JHASH__")}))},s=function(){var a=d("WAWebWidFactory").createWid(i);d("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:a,productId:g}).then(function(){var b=d("WAWebCatalogCollection").CatalogCollection.get(a);o(c("WANullthrows")(b).productCollection.get(g));q("SUCCESS")})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){r(),q("ERROR")}))["catch"](function(a){d("WAWebProductCatalogFetchState").parseErrorState(a,function(a){q(a)})})};l(function(){n||s()},[]);return n?k.jsx(c("WAWebProductCatalogProductDetailsDrawer.react"),{ref:b,chat:a.chat,isPushed:e,product:n,onEnd:a.onEnd,onBack:a.onBack,onProductDetail:a.onProductDetail,onProductCatalog:a.onProductCatalog,refreshCarousel:!0,onProductLinkClick:a.onProductLinkClick,onProductMoreInformation:a.onProductMoreInformation,onCartClick:a.onCartClick}):k.jsxs(c("WAWebDrawer.react"),{ref:b,onDrop:a.onBack,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{testid:void 0,title:h._("__JHASH__hg9BRt8_aW-__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),k.jsx(c("WAWebDrawerBody.react"),{children:k.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:p})})]},"product-details-drawer")}a.displayName=a.name+" [from "+f.id+"]";g.ProductDetailsWithDeepLink=e}),226);
__d("WAWebProductCatalogProductMessageListNoProductModal",["fbt","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebFbtCommon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){a=a.onConfirm;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,okText:c("WAWebFbtCommon")("OK"),children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._("__JHASH__ZHS9rX0-Jh0__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebProductCatalogProductMessageList.react",["WAWebDrawerContext","WAWebDrawerManager","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebModalManager","WAWebProductCatalogCatalogConstants","WAWebProductCatalogContext","WAWebProductCatalogListItem.react","WAWebProductCatalogLogEvents","WAWebProductCatalogProductMessageListNoProductModal","WAWebSectionHeader.react","WAWebStateUtils","WAWebUISpacing","WAWebUtilsLogQplEvents","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useCallback,m=b.useEffect,n={list:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},o=d("WAWebFlatList.react").FlatListFactory();function p(a){var b=a.item,e=a.onProductDetail,f=l(function(a,b){d("WAWebProductCatalogLogEvents").logCatalogListDetailClick({product:d("WAWebStateUtils").unproxy(a),catalogContext:b});d("WAWebUtilsLogQplEvents").qplStartProductView("PLM");return e(a)},[e]);a=null;switch(b.type){case"section":var g=b.label;a=k.jsx(c("WAWebSectionHeader.react"),{header:g});break;case"product":var h=b.product;a=k.jsx(d("WAWebDrawerContext").DrawerContext.Consumer,{children:function(a){return k.jsx(c("WAWebProductCatalogListItem.react"),{product:h,onClick:function(){return f(h,d("WAWebProductCatalogContext").getProductCatalogContext(a))},canManageCatalog:!1})}});break}return a}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.flatListController,e=a.onProductDetail;a=a.productMessageList;var f=a.productCollection.getProductModels(),g=a.getSections(),h=a.getSectionsCount()>0,j=a.getTotalProductsFetchedOrFailed();a=a.getProductSize();var l=a===j&&f.length===0,q=[];g.forEach(function(a,b){var c=a.title;a=a.products;var e=[];a.forEach(function(a){var c=a.productId;a=f.find(function(a){return a.id===c});a!=null&&e.push({itemKey:"section-"+b+"-"+a.id.toString(),product:a,type:"product",height:d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT})});e.length>0&&(c!=null&&c!==""&&q.push({itemKey:"header-"+b+"-"+c,label:c,type:"section",height:72}),q.push.apply(q,e))});m(function(){l&&d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebProductCatalogProductMessageListNoProductModal"),{onConfirm:function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),d("WAWebModalManager").ModalManager.close()}}))},[l]);return k.jsx("div",{className:(i||(i=c("stylex")))(n.list,d("WAWebUISpacing").uiPadding.bottom8,!h&&d("WAWebUISpacing").uiMargin.top8),children:k.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[b],children:k.jsx(o,{flatListController:b,direction:"vertical",forceConsistentRenderCount:!1,data:q,renderItem:function(a){return k.jsx(p,{item:a,onProductDetail:e})},itemEnterAnimationsEnabled:!0})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebProductCatalogProductMessageListDrawer.react",["WAQplTypes","WATypeUtils","WAWebCartCollection","WAWebCommonCartIconMenuBarItem.react","WAWebContactGetters","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerContext","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFlatListController","WAWebFlatListLoadingSpinnerItem.react","WAWebFrontendConstants","WAWebProductCatalogCatalogConstants","WAWebProductCatalogCheckCartEnabled","WAWebProductCatalogContext","WAWebProductCatalogFetchState","WAWebProductCatalogFetchStateTopBar.react","WAWebProductCatalogLogEvents","WAWebProductCatalogProductMessageList.react","WAWebProductMessageListCollection","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUtilsLogQplEvents","asyncToGeneratorRuntime","react","useLazyRef","useWAWebContactValues","useWAWebListener","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;e=i||d("react");var j=h||(h=c("react")),k=e.useContext,l=e.useEffect,m=e.useState;function n(a){var b=a.loadingMore,d=a.onProductDetail,e=a.productListFlatListControllerRef,f=a.productMessageList;a=a.productMessageListFetchState;return!f?j.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:a}):j.jsxs("div",{children:[j.jsx(c("WAWebProductCatalogProductMessageList.react"),{productMessageList:f,flatListController:e.current,onProductDetail:d}),b&&j.jsx(c("WAWebFlatListLoadingSpinnerItem.react"),{})]})}n.displayName=n.name+" [from "+f.id+"]";e=j.forwardRef(a);function a(a,e){var f=babelHelpers["extends"]({},a),g=f.productListId,h=f.setScrollOffset,i=f.onCartClick;a=f.onProductDetail;var o=f.catalogWid,p=c("useWAWebUnmountSignal")(),q=k(d("WAWebDrawerContext").DrawerContext),r=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()}),s=d("useWAWebContactValues").useContactValues(f.contact.id,[d("WAWebContactGetters").getId]),t=s[0];s=m(!1);var u=s[0],v=s[1];s=m(0);var w=s[0],x=s[1];s=m(!1);var y=s[0],z=s[1];s=m(function(){return d("WAWebProductMessageListCollection").ProductMessageListCollection.get(g)});var A=s[0],B=s[1];s=m(function(){return d("WAWebCartCollection").CartCollection.findCart(t.toString())});var C=s[0];s=m(C.itemCount);var D=s[0],E=s[1];s=m(!1);var F=s[0],G=s[1];s=m(A?"SUCCESS":"NONE");var H=s[0],I=s[1],J=function a(b){var c=f.isPushed;c=c===void 0?!0:c;var e=c&&b===!0;c=d("WAWebProductMessageListCollection").ProductMessageListCollection.assertGet(g);var h=c.getTotalProductsFetchedOrFailed();b=c.getProductSize();if(y||h===b){e&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{"int":{ProductsCount:h}}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS));z(!0);return}v(!0);x(h);c=e?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW:void 0;d("WAWebProductMessageListCollection").ProductMessageListCollection.update(g,{markerId:c}).then(function(b){if(p.aborted){e&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerDrop(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW);return}v(!1);b=Array.isArray(b)?b[0]:b;b=b.getTotalProductsFetchedOrFailed();b===w&&z(!0);e&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{"int":{ProductsCount:b}}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS));h*d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&a()})["catch"](function(){v(!1),z(!0),e&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.FAIL)})},K=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=f.isPushed;a=a===void 0?!0:a;try{var b=(yield d("WAWebProductMessageListCollection").ProductMessageListCollection.find(g));if(p.aborted){a&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerDrop(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW);return}B(b);I("SUCCESS");J(!0)}catch(b){d("WAWebProductCatalogFetchState").parseErrorState(b,function(a){return I(a)}),a&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.FAIL)}});return function(){return a.apply(this,arguments)}}();l(function(){A?J():K(),c("WAWebProductCatalogCheckCartEnabled")(t).then(function(a){if(p.aborted)return;G(a);d("WAWebProductCatalogLogEvents").logCatalogListView({catalogOwnerWid:o,catalogContext:d("WAWebProductCatalogContext").getProductCatalogContext(q),cartToggle:a})})},[]);d("useWAWebListener").useListener(C,"all",function(){E(C.itemCount)});var L=function(a){if(u)return;a.scrollTop+d("WAWebFrontendConstants").SCROLL_FUDGE>a.scrollHeight-a.clientHeight&&J()};s=function(a){L(a.currentTarget),h==null?void 0:h(a.currentTarget.scrollTop)};var M=function(){d("WAWebUtilsLogQplEvents").qplStartCartView("PLM"),i==null?void 0:i(t.toString())};F=i!=null&&F?j.jsx(d("WAWebCommonCartIconMenuBarItem.react").CartIconMenuBarItem,{cartCountText:d("WATypeUtils").isNumber(D)&&D>0?D.toString():void 0,onClick:M,catalogOwnerJid:t.toString()}):null;return j.jsxs(c("WAWebDrawer.react"),{ref:e,theme:"products",onDrop:f.onBack,children:[j.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:j.jsx("div",{className:"x78zum5",children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:A==null?void 0:A.title,ellipsify:!0})}),titleStr:A==null?void 0:A.title,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:f.onBack,menu:F}),j.jsx(c("WAWebDrawerBody.react"),{onScroll:s,flatListControllers:[r.current],scrollOffset:f.scrollOffset,children:j.jsx(n,{productMessageList:A,loadingMore:u,productMessageListFetchState:H,onProductDetail:a,productListFlatListControllerRef:r})})]})}a.displayName=a.name+" [from "+f.id+"]";e.displayName="ProductMessageListDrawer";g.ProductMessageListDrawer=e}),98);
__d("WAWebBizProductDetailsFlow.react",["fbt","$InternalEnum","WANullthrows","WATimeUtils","WAWebBizEntryPoint","WAWebBizGatingUtils","WAWebBizLinkedCatalogErrorPopup.react","WAWebBizShowCartAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebCartOrderDetailDrawer.react","WAWebChatThreadLogging","WAWebConfirmPopup.react","WAWebContactCollection","WAWebDBUpdateMessageTable","WAWebDrawerContext","WAWebFbtCommon","WAWebModalManager","WAWebMsgCollection","WAWebOrderCollection","WAWebOrderCreationFlowLoadable","WAWebOrderDetailDrawer.react","WAWebOrderDetailProductListDrawer.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderStatusUpdateDrawer.react","WAWebOrdersExpansionUtils","WAWebProductCatalogCatalogLinkDrawer.react","WAWebProductCatalogContext","WAWebProductCatalogLogEvents","WAWebProductCatalogProductDetailsDrawer.react","WAWebProductCatalogProductDetailsWithDeepLink.react","WAWebProductCatalogProductLinkDrawer.react","WAWebProductCatalogProductListDrawer.react","WAWebProductCatalogProductMessageListDrawer.react","WAWebProductCatalogProductMoreInformationDrawer.react","WAWebProductCollectionCatalogViewDrawer.react","WAWebProductCollectionCollectionContentDrawer.react","WAWebProtobufsE2E.pb","WAWebSmbDataSharingOptInModalDialog","WAWebToast.react","WAWebToastManager","WAWebUim","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","WAWebWamEnumSmbDataSharingConsentScreenEntryPoint","WAWebWidFactory","asyncToGeneratorRuntime","err","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),aa=e.useContext,l=e.useEffect,m=e.useState,ba=function(a){if(!d("WAWebBizGatingUtils").isSellerOrderRevampEnabled())return;if(a!=null){var b={status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.ACCEPTED};void d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,b);a=d("WAWebMsgCollection").MsgCollection.get(a.id);a&&a.set(b)}},n=k.forwardRef(a),o=b("$InternalEnum").Mirrored(["Cart","CartOrderDetail","CatalogCollection","CatalogLink","CatalogView","OrderCreation","OrderDetail","OrderDetailProductList","OrderStatusUpdate","ProductDetails","ProductDetailsFlow","ProductDetailsWithDeepLink","ProductLink","ProductList","ProductMessageList","ProductMoreInformation"]);function a(a,e){a=babelHelpers["extends"]({},a);var f=a.chat,g=a.orderMessage,i=a.product,j=a.productInfo,p=a.productListId,ca=a.refreshCarousel,q=a.catalogOwnerJid,r=a.orderId,s=a.orderInfo,t=a.token,u=a.sellerJid,v=a.userIsCartOwner,w=a.collection,da=a.collectionId,ea=a.isAllItems,x=a.entryPoint;a=a.onEnd;a=d("useWAWebFlow").useFlow(void 0,{onEnd:a});var fa=a[0],y=a[1];a=m();var z=a[0],A=a[1];a=m();var B=a[0],C=a[1];a=m();var D=a[0],E=a[1];a=m();var ga=a[0],ha=a[1];a=m();var ia=a[0],ja=a[1];a=m();var ka=a[0],la=a[1];a=m();var ma=a[0],na=a[1];a=m();var F=a[0],oa=a[1];a=m();var pa=a[0],qa=a[1];a=m();var ra=a[0],sa=a[1];a=m();var G=a[0],ta=a[1];a=m();var H=a[0],ua=a[1];a=m();var I=a[0],J=a[1];a=m();var K=a[0],va=a[1];a=m(0);var L=a[0];a=a[1];var M=aa(d("WAWebDrawerContext").DrawerContext),wa=function(a){var b=d("WAWebContactCollection").ContactCollection.gadd(a);J(b);A(a);y.push(o.CatalogCollection)},xa=function(a,b){var c=d("WAWebContactCollection").ContactCollection.gadd(b);J(c);A(b);ja(a);y.push(o.ProductMessageList)},N=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebContactCollection").ContactCollection.gadd(a),c=(yield d("WAWebBusinessProfileCollection").BusinessProfileCollection.find(a));J(b);A(a);C(c);d("WAWebBusinessProfileUtils").hasCatalog(c)?y.push(o.CatalogView):y.push(o.ProductList)});return function(b){return a.apply(this,arguments)}}(),O=function(a,b){a=a.id.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser());d("WAWebBizLinkedCatalogErrorPopup.react").showConnectedCatalogDisabledPopup(b,a,function(){y.end()})},P=function(a,b){E(a),na(b),y.push(o.ProductDetails)},Q=function(a){ha(a),y.push(o.ProductDetailsWithDeepLink)},R=function(a,b){var e;b===void 0&&(b=null);var g=d("WAWebUserPrefsMeUser").getMaybeMeUser();new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.CLICK_CREATE_ORDER_DETAILS_FROM_CART,actionCategory:String(c("WAWebOrderDetailsActionCategory").RECEIVED_CART),orderDetailEntryPoint:String((e=x)!=null?e:c("WAWebBizEntryPoint").FROM_CART),hasCatalog:g!=null?d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(g)):!1}).commit();e=function(){qa(a),sa(b),y.push(o.OrderCreation)};c("WAWebSmbDataSharingOptInModalDialog").maybeShowOrderDataSharingDialog(f,e,d("WAWebWamEnumSmbDataSharingConsentScreenEntryPoint").SMB_DATA_SHARING_CONSENT_SCREEN_ENTRY_POINT.CART)},ya=function(){d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{action:{dismiss:!0,actionText:c("WAWebFbtCommon")("OK")},msg:h._("__JHASH__ettcSfVSOyY__JHASH__"),id:d("WAWebToast.react").genId()}))},za=function(a){ta(a),y.push(o.CartOrderDetail)},Aa=function(){y.push(o.OrderDetail)};l(function(){d("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"isCommerceViewed",ts:d("WATimeUtils").unixTime(),chatId:f.id}])},[]);l(function(){var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebBusinessProfileCollection").BusinessProfileCollection.find(a));C(a)});return function(b){return a.apply(this,arguments)}}();if(q!=null){if(B==null){void a(d("WAWebWidFactory").createWid(q));return}if((B==null?void 0:B.isCatalogDisabledDueToMetaLinking)===!0){O(B,!1);return}w!=null||ea===!0?wa(d("WAWebWidFactory").createWid(q)):p!=null?xa(p,d("WAWebWidFactory").createWid(q)):void N(d("WAWebWidFactory").createWid(q))}else if(i){if(B==null){void a(i.catalogWid);return}if((B==null?void 0:B.isCatalogDisabledDueToMetaLinking)===!0){O(B,!0);return}P(i,da)}else if(j){if(B==null){void a(d("WAWebWidFactory").createWid(j.businessOwnerJid));return}if(B==null?void 0:B.isCatalogDisabledDueToMetaLinking){O(B,!0);return}Q(j)}else if(r!=null){if(t!=null&&u!=null&&v!=null)if(d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled())d("WAWebOrderCollection").OrderCollection.findOrder(r,u,t).then(function(a){R(c("WANullthrows")(a),Ea)})["catch"](function(){ya()});else{a=!1;za(a)}}else if(s!=null&&u!=null)Aa();else throw c("err")("ProductDetailsFlow:no-product")},[B]);var S=function(a){oa(a),y.push(o.ProductDetailsFlow)},Ba=function(a){la(a),y.push(o.OrderDetailProductList)},Ca=function(){var a=d("WAWebUserPrefsMeUser").getMaybeMeUser();new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.CLICK_UPDATE_ORDER_STATUS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(x),hasCatalog:a!=null?d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(a)):!1}).commit();s!=null&&u!=null&&y.push(o.OrderStatusUpdate)},Da=function(){if(r!=null&&t!=null&&u!=null&&v!=null){var a=!0;za(a)}d("WAWebModalManager").ModalManager.close()},Ea=function(){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onCancel:function(){d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__BQuudHjVcNe__JHASH__"),onOK:Da,okText:h._("__JHASH__puy9NeJAODx__JHASH__"),title:h._("__JHASH__gwVNWAbk8xZ__JHASH__"),children:h._("__JHASH__aBKg2rThb8v__JHASH__")}))},T=function(a,b){void P(a,b)},Fa=function(a){E(a),y.push(o.ProductMoreInformation)},U=function(a){Q(a)},Ga=function(a,b){d("WAWebProductCatalogLogEvents").logCarouselViewMoreClick({catalogOwnerWid:a,catalogContext:b}),void N(a)},Ha=function(a){E(a),y.push(o.ProductLink)},V=function(a,b){ua(a),J(b),y.push(o.CatalogLink)},W=function(a){var b=d("WAWebProductCatalogContext").getProductCatalogContext(M);b=c("WAWebBizShowCartAction")(a,f,b);b&&(va(a),y.push(o.Cart))},X=function(){y.pop()},Y=function(){y.end(d("WAWebUim").DismissReason.LIFECYCLE)};if(y.step==null)return null;var Z;switch(y.step){case o.Cart:var $=d("WAWebProductCatalogContext").getProductCatalogContext(M);K=c("WAWebBizShowCartAction")(c("WANullthrows")(K),f,$);Z=c("WANullthrows")(K);break;case o.CartOrderDetail:Z=k.jsx(c("WAWebCartOrderDetailDrawer.react"),{orderId:c("WANullthrows")(r),token:c("WANullthrows")(t),sellerJid:c("WANullthrows")(u),userIsCartOwner:c("WANullthrows")(v),onProductDetail:U,onOrderCreate:R,onOrderCancel:Ea,ownerHasReviewed:Boolean(G),orderMessage:g,chat:f});break;case o.CatalogCollection:Z=k.jsx(d("WAWebProductCollectionCollectionContentDrawer.react").CollectionContentDrawer,{contact:c("WANullthrows")(I),onProductDetail:T,catalogId:c("WANullthrows")(z),onBack:X,onCatalogLinkClick:V,onCartClick:W,scrollOffset:L,setScrollOffset:a,collection:w});break;case o.CatalogLink:Z=k.jsx(c("WAWebProductCatalogCatalogLinkDrawer.react"),{catalog:c("WANullthrows")(H),contact:c("WANullthrows")(I),onBack:X});break;case o.CatalogView:Z=k.jsx(c("WAWebProductCollectionCatalogViewDrawer.react"),{contact:c("WANullthrows")(I),onProductDetail:T,catalogId:c("WANullthrows")(z),onBack:X,businessProfile:B,scrollOffset:L,setScrollOffset:a,onCatalogLinkClick:V,onCartClick:W,onCollectionSeeAll:S});break;case o.OrderCreation:Z=k.jsx(c("WAWebOrderCreationFlowLoadable"),{entryPoint:($=x)!=null?$:c("WAWebBizEntryPoint").FROM_CART,onBack:X,order:(K=pa)!=null?K:void 0,chat:f,onDeclineOrder:ra,onSend:function(){return ba(g)}});break;case o.OrderDetail:Z=k.jsx(c("WAWebOrderDetailDrawer.react"),{entryPoint:x,onBack:X,orderInfo:c("WANullthrows")(s),sellerWid:d("WAWebWidFactory").createWid(c("WANullthrows")(u)),chat:f,onProductSummaryClick:Ba,onOrderStatusUpdateClick:Ca});break;case o.OrderDetailProductList:Z=k.jsx(c("WAWebOrderDetailProductListDrawer.react"),{onBack:X,productItems:c("WANullthrows")(ka)});break;case o.OrderStatusUpdate:Z=k.jsx(c("WAWebOrderStatusUpdateDrawer.react"),{entryPoint:x,chat:f,onBack:X,orderInfo:c("WANullthrows")(s),sellerJid:c("WANullthrows")(u)});break;case o.ProductDetails:Z=k.jsx(c("WAWebProductCatalogProductDetailsDrawer.react"),{chat:f,product:c("WANullthrows")(D),onEnd:Y,onBack:X,onProductDetail:T,onProductCatalog:Ga,onProductLinkClick:Ha,onProductMoreInformation:Fa,refreshCarousel:ca,onCartClick:W,collectionId:(U=ma)!=null?U:void 0});break;case o.ProductDetailsFlow:Z=k.jsx(n,{chat:f,catalogOwnerJid:(L=(H=(G=q)!=null?G:i==null?void 0:i.catalogWid.toString())!=null?H:j==null?void 0:j.businessOwnerJid)!=null?L:u,collection:(S=F)!=null?S:void 0,isAllItems:!F});break;case o.ProductDetailsWithDeepLink:Z=k.jsx(d("WAWebProductCatalogProductDetailsWithDeepLink.react").ProductDetailsWithDeepLink,{chat:f,productInfo:c("WANullthrows")(ga),onEnd:Y,onBack:X,onProductDetail:T,onProductCatalog:Ga,onProductLinkClick:Ha,onProductMoreInformation:Fa,onCartClick:W});break;case o.ProductLink:Z=k.jsx(c("WAWebProductCatalogProductLinkDrawer.react"),{product:c("WANullthrows")(D),onBack:X});break;case o.ProductList:Z=k.jsx(d("WAWebProductCatalogProductListDrawer.react").ProductListDrawer,{contact:c("WANullthrows")(I),onProductDetail:T,catalogId:c("WANullthrows")(z),onBack:X,businessProfile:B,setScrollOffset:a,onCatalogLinkClick:V,onCartClick:W});break;case o.ProductMessageList:Z=k.jsx(d("WAWebProductCatalogProductMessageListDrawer.react").ProductMessageListDrawer,{contact:c("WANullthrows")(I),productListId:c("WANullthrows")(ia),onProductDetail:T,onCartClick:W,onBack:X,onEnd:Y,setScrollOffset:a,catalogWid:c("WANullthrows")(z)});break;case o.ProductMoreInformation:Z=k.jsx(c("WAWebProductCatalogProductMoreInformationDrawer.react"),{product:c("WANullthrows")(D),onBack:X});break}return k.jsx(fa,{ref:e,flow:y,displayName:"ProductDetailsFlow",children:Z})}a.displayName=a.name+" [from "+f.id+"]";e=n;g["default"]=e}),226);